<!DOCTYPE html>
<html>
<head>
	<title>Film list</title>
	<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.20.0/axios.min.js"></script>
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<meta name="viewport" content="width=device-width, initial-scale=0.9, user-scalable=no">
</head>
<body>

	<div id="app">
		<button class="rlds" @click="rld">↺</button>
		<h1>Фильмы</h1>
		<li v-for="item in datas['name'].length">
			<span v-if="datas['wtc'][item-1] == 'FALSE'">
				<div class="id">{{ item }}</div>
				<div class="name">{{ datas['name'][item-1] }}</div>
				<div class="year">{{ datas['year'][item-1] }}</div>
				<div class="gen">{{ datas['gen'][item-1] }}</div>
				<button class="btn" @click="wtcFilm(item)"></button>
			</span>
			<span v-if="datas['wtc'][item-1] == 'TRUE'" class="done">
				<div class="id">{{ item }}</div>
				<div class="name">{{ datas['name'][item-1] }}</div>
				<div class="year">{{ datas['year'][item-1] }}</div>
				<div class="gen">{{ datas['gen'][item-1] }}</div>
				<button class="btn" @click="wtcFilm(item)"></button>
			</span>
		</li>
	</div>


	<center>
		<h2>IK qr code</h2>
		<img src="http://qrcoder.ru/code/?https%3A%2F%2Fiskanderkurbanov.github.io%2F&4&0" width="148" height="148" border="0" title="QR код">
	</center>

	<script>
	new Vue({
		el: '#app',
		data() {
			return {
				datas: null,
			}
		},
		mounted() {
			axios.get('https://knd-logs.herokuapp.com/films')
				.then(response => (this.datas = response['data']))
				.catch(error => console.log(error));
		},
		methods: {
			wtcFilm(item) {
				axios.post('https://knd-logs.herokuapp.com/films', { 'id' : item, })
				.then((response) => { console.log(response) })
				.catch((error) => { console.log(error) });
			},
			rld() {
				location.reload()
			}
		},
	});
	</script>
</body>
</html>